<% content_for :title, @document.title.presence || "Dokument" %>

<%# optional: Meldung %>
<% if notice.present? %>
  <p class="notice"><%= notice %></p>
<% end %>

<div class="doc-show">
  <div class="card">
    <header class="card-head">
      <div>
        <h1><%= @document.title.presence || "Dokument" %></h1>
        <div class="meta">
          <span class="chip">User: <%= @document.user_id %></span>
          <span class="chip">Template: <%= @document.template_id %></span>
        </div>
      </div>

      <div class="actions">
        <%= link_to "Bearbeiten", edit_document_path(@document), class: "btn ghost" %>
        <%= link_to "Export ZIP", export_zip_document_path(@document),
              class: "btn ghost", data: { turbo: false } %>
        <%= button_to "Löschen", @document, method: :delete,
              class: "btn danger",
              form: { data: { turbo_confirm: "Wirklich löschen?" } } %>
      </div>
    </header>

    <section class="section">
      <h2>Body (frei)</h2>
      <% if @document.body.present? %>
        <pre class="code"><%= @document.body %></pre>
      <% else %>
        <p class="muted">Kein freier Body vorhanden.</p>
      <% end %>
    </section>

    <% if @document.respond_to?(:compiled_body) && @document.compiled_body.present? %>
      <section class="section">
        <h2>Gerenderter Inhalt (compiled_body)</h2>
        <pre class="code"><%= @document.compiled_body %></pre>
      </section>
    <% end %>

    <footer class="foot">
      <%= link_to "Zur Liste", documents_path, class: "btn ghost" %>
    </footer>
  </div>
</div>
