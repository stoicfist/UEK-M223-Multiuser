<div class="tpl-show">
  <header class="tpl-head">
    <div class="tpl-title">
      <h1><%= @latex_template.title %></h1>
      <div class="tpl-meta">
        <span class="chip owner">
          Eigent√ºmer: <%= @latex_template.user&.email || @latex_template.user_id %>
        </span>
        <span class="chip vis <%= @latex_template.visibility %>">
          <%= @latex_template.visibility %>
        </span>
        <span class="chip uses">
          Benutzt: <%= @latex_template.try(:usage_count) || "0x" %>
        </span>
      </div>
    </div>

    <div class="tpl-actions">
      <%= link_to "Template klonen",
                  new_document_path(template_id: @latex_template.id),
                  class: "btn" %>
      <%= link_to "Zur Galerie", latex_templates_path, class: "btn ghost" %>
    </div>
  </header>

  <% if @latex_template.description.present? %>
    <section class="tpl-desc">
      <p><%= @latex_template.description %></p>
    </section>
  <% end %>

  <section class="tpl-preview">
    <h2>Vorschau (Auszug)</h2>
    <pre class="preview-block"><%= truncate(@latex_template.body.to_s, length: 300) %></pre>

    <details class="code-details">
      <summary>Kompletten LaTeX-Code anzeigen</summary>
      <div class="code-toolbar">
        <button type="button" class="btn ghost" data-copy="#tpl-code">
          In Zwischenablage kopieren
        </button>
      </div>
      <pre id="tpl-code" class="code-block"><%= @latex_template.body %></pre>
    </details>
  </section>
</div>
